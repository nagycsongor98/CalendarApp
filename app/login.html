<!doctype html>
<html lang="en">

<head>
        <!-- Compiled and minified CSS -->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

       <!-- Compiled and minified JavaScript -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <style>
        body{
            background-image: url(background.jpg);
            background-size: cover;
            color: #fff;
        }
        .login{
            width: 30%;
            margin: auto;
        }
        .login .card{
            background: rgba(0, 0, 0, .6);
        }
        .login label{
            font-size: 16px;
            color: #ccc;
        }
        .login input{
            font-size: 20px;
            color: #fff;
        }
        .toast{
            background-color: #01579B !important;
        }
    </style>

</head>
<!-- login form -->

<body>
    <div class="login">
        <div class="col s12 l4 offset-14">
            <div class="card">
                <div class="card-action blue black-text">
                    <h3>Login Form</h3>
                </div>
                <div class="card-content">
                    <div class="form-field">
                        <label for="email">Email</label>
                        <input type="text" id="email">
                    </div><br>

                    <div class="form-field">
                            <label for="password">Password</label>
                            <input type="password" id="password">
                    </div><br>

                    <div class="form-field">
                        <label for="remember">Remember me</label>
                        <input id="remember" type="checkbox">
                    </div><br>

                    <div class="form-field center-align">
                        <button class="btn-large red" onclick=login()>Login</button>
                    </div><br>
                </div>
            </div>
        </div>
    </div>


    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-analytics.js"></script>

    <script>
    // Your web app's Firebase configuration

    const firebaseConfig = {
    apiKey: "AIzaSyD9JXrvbpRc5B674cET0RUQeNITVHT11j8",
    authDomain: "calendarapp-61f18.firebaseapp.com",
    databaseURL: "https://calendarapp-61f18.firebaseio.com",
    projectId: "calendarapp-61f18",
    storageBucket: "calendarapp-61f18.appspot.com",
    messagingSenderId: "486525269017",
    appId: "1:486525269017:web:ac9e3f62322fa690d5e688",
    measurementId: "G-WWFS07MXSP"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    </script>

    <script>
    
    function login(){
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var datab_ref = firebase.database().ref("Users");

        var user={
            email: email,
            password: password
        }

        console.log(email,password);
        if(!email || !password){
            M.toast({html: 'Email or password required', classes: 'rounded'});
        }

        if(email && password){
            if(validateEmail(email)){
                    localStorage.setItem("email",email);
                    localStorage.setItem("password",password);

                    datab_ref.push(user, function(error){
                    window.location.href = "index.html";
                    });
                   
                }
            else {
                M.toast({html: 'Not a valid email', classes: 'rounded'});
            }
        }

    }

    function validateEmail(email) {
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }

    </script>

</body>

</html>